/* Projeto Lab LITTORAL: Envio de um sinal IR e Acionamento Online */

#define  BLYNK_PRINT Serial
#include  <ESP8266WiFi.h>
#include  <BlynkSimpleEsp8266.h>
#include <IRac.h>
#include <IRrecv.h>
#include <IRremoteESP8266.h>
#include <IRsend.h>

char auth [] = " K5qD_hOOgwgsG_wkFKM47SzGTdBtSZh9 " ; // Meu Token do BLYNK
char ssid [] = "....." ;
char pass [] = "wifidecasa" ;

const uint16_t IrLed = 4;
IRsend irsend(IrLed);


uint16_t powerOnRawData[199] = {4298, 4508,  420, 1732,  442, 632,  444, 1732,  444, 1758,  418, 632,  442, 632,  444, 1732,  444, 632,  442, 632,  442, 1758,  418, 632,  442, 632,  442, 1734,  440, 1758,  420, 632,  442, 1758,  418, 632,  442, 1758,  420, 1756,  418, 1758,  418, 1758,  420, 632,  442, 1756,  420, 1756,  420, 1734,  442, 630,  442, 632,  442, 632,  442, 632,  442, 1734,  442, 632,  444, 630,  442, 1758,  420, 1732,  444, 1756,  418, 632,  442, 632,  442, 632,  442, 632,  442, 632,  442, 632,  442, 632,  442, 632,  442, 1758,  420, 1756,  418, 1756,  420, 1734,  442, 1756,  418, 5300,  4326, 4512,  420, 1756,  418, 634,  442, 1758,  420, 1756,  418, 632,  442, 632,  442, 1734,  442, 632,  442, 630,  444, 1756,  420, 632,  444, 632,  444, 1756,  420, 1758,  418, 632,  442, 1758,  420, 630,  442, 1758,  418, 1756,  418, 1758,  420, 1736,  442, 632,  442, 1756,  420, 1756,  418, 1758,  418, 634,  442, 632,  442, 634,  442, 632,  442, 1758,  418, 632,  442, 632,  442, 1758,  418, 1756,  418, 1734,  440, 634,  442, 634,  442, 630,  442, 634,  442, 632,  442, 632,  442, 634,  442, 632,  442, 1756,  420, 1758,  420, 1756,  418, 1756,  418, 1760,  420};  // UNKNOWN 5E7E4778
uint16_t powerOffRawData[199] = {4300, 4484,  442, 1756,  420, 630,  442, 1736,  440, 1756,  420, 636,  438, 632,  442, 1730,  444, 632,  442, 632,  442, 1734,  442, 632,  442, 632,  442, 1734,  442, 1734,  442, 632,  442, 1732,  442, 634,  442, 1756,  418, 632,  442, 1756,  418, 1758,  418, 1756,  420, 1754,  420, 1758,  418, 1756,  418, 634,  440, 1756,  420, 632,  442, 632,  442, 632,  444, 632,  442, 632,  442, 630,  442, 1756,  422, 1758,  418, 1756,  420, 632,  442, 632,  444, 632,  442, 632,  442, 1756,  420, 630,  444, 632,  440, 632,  442, 1758,  418, 1732,  442, 1758,  420, 1758,  420, 5320,  4300, 4508,  418, 1734,  442, 632,  442, 1732,  442, 1756,  420, 632,  442, 634,  442, 1756,  420, 632,  442, 632,  442, 1734,  442, 632,  442, 632,  442, 1756,  418, 1758,  420, 630,  442, 1758,  420, 632,  440, 1758,  418, 634,  442, 1756,  418, 1758,  420, 1756,  418, 1756,  420, 1756,  418, 1756,  420, 632,  440, 1758,  418, 632,  442, 634,  442, 632,  442, 632,  442, 632,  442, 632,  440, 1758,  420, 1732,  442, 1758,  418, 634,  440, 634,  440, 634,  442, 632,  440, 1758,  418, 634,  440, 632,  442, 632,  442, 1756,  418, 1756,  418, 1758,  420, 1758,  420};  // UNKNOWN EF58F98

WidgetLCD lcd(V0);

BLYNK_WRITE (V1)
{
int buttonState1 = param.asInt();
     if (buttonState1 == 1 ) {
  lcd.print(0,0,"LIGANDO...");
  irsend.sendRaw(powerOffRawData, 199, 38);
  delay(5000);        
    }
}

BLYNK_WRITE (V2)
{
  
int buttonState2 = param.asInt();
     if (buttonState2 == 1 ) {
  lcd.print(0,0,"DESLIGA...");
  irsend.sendRaw(powerOnRawData, 199, 38);
  delay(5000);        
    }
    
}

void  setup () {
  
  irsend.begin();
  Serial.begin(115200, SERIAL_8N1, SERIAL_TX_ONLY);
  Blynk.begin (auth, ssid, pass);
  
}

void  loop () {
  Blynk.run ();
}
